
// Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['corechart']});

var data = [{"ID":346,"title":"Add title","status":"publish","type":"prevalence","author":{"ID":1,"username":"cancer","name":"admin","first_name":"","last_name":"","nickname":"admin","slug":"cancer","URL":"","avatar":"http:\/\/2.gravatar.com\/avatar\/559996423861baf6442d47180dc5e489?s=96","description":"","registered":"2015-11-07T20:44:29+00:00","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","archives":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1\/posts"},"0":false}},"content":"","parent":null,"link":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/prevalence\/auto-draft-6\/","date":"2015-11-08T01:57:08","modified":"2015-11-08T01:57:08","format":"standard","slug":"auto-draft-6","guid":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/?post_type=prevalence&#038;p=346","excerpt":null,"menu_order":0,"comment_status":"closed","ping_status":"closed","sticky":false,"date_tz":"UTC","date_gmt":"2015-11-08T01:57:08","modified_tz":"UTC","modified_gmt":"2015-11-08T01:57:08","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/346","author":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","collection":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts","replies":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/346\/comments","version-history":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/346\/revisions"},"year_range":"Total up to 20 years","affected_people":"640"},"terms":[]},{"ID":345,"title":"Auto Draft","status":"publish","type":"prevalence","author":{"ID":1,"username":"cancer","name":"admin","first_name":"","last_name":"","nickname":"admin","slug":"cancer","URL":"","avatar":"http:\/\/2.gravatar.com\/avatar\/559996423861baf6442d47180dc5e489?s=96","description":"","registered":"2015-11-07T20:44:29+00:00","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","archives":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1\/posts"},"0":false}},"content":"","parent":null,"link":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/prevalence\/auto-draft-5\/","date":"2015-11-08T01:56:45","modified":"2015-11-08T01:56:45","format":"standard","slug":"auto-draft-5","guid":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/?post_type=prevalence&#038;p=345","excerpt":null,"menu_order":0,"comment_status":"closed","ping_status":"closed","sticky":false,"date_tz":"UTC","date_gmt":"2015-11-08T01:56:45","modified_tz":"UTC","modified_gmt":"2015-11-08T01:56:45","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/345","author":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","collection":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts","replies":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/345\/comments","version-history":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/345\/revisions"},"year_range":"&gt; 10 to 20 years","affected_people":"56"},"terms":[]},{"ID":344,"title":"Auto Draft","status":"publish","type":"prevalence","author":{"ID":1,"username":"cancer","name":"admin","first_name":"","last_name":"","nickname":"admin","slug":"cancer","URL":"","avatar":"http:\/\/2.gravatar.com\/avatar\/559996423861baf6442d47180dc5e489?s=96","description":"","registered":"2015-11-07T20:44:29+00:00","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","archives":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1\/posts"},"0":false}},"content":"","parent":null,"link":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/prevalence\/auto-draft-4\/","date":"2015-11-08T01:56:25","modified":"2015-11-08T01:56:25","format":"standard","slug":"auto-draft-4","guid":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/?post_type=prevalence&#038;p=344","excerpt":null,"menu_order":0,"comment_status":"closed","ping_status":"closed","sticky":false,"date_tz":"UTC","date_gmt":"2015-11-08T01:56:25","modified_tz":"UTC","modified_gmt":"2015-11-08T01:56:25","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/344","author":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","collection":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts","replies":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/344\/comments","version-history":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/344\/revisions"},"year_range":"&gt; 5 to 10 years","affected_people":"59"},"terms":[]},{"ID":343,"title":"Auto Draft","status":"publish","type":"prevalence","author":{"ID":1,"username":"cancer","name":"admin","first_name":"","last_name":"","nickname":"admin","slug":"cancer","URL":"","avatar":"http:\/\/2.gravatar.com\/avatar\/559996423861baf6442d47180dc5e489?s=96","description":"","registered":"2015-11-07T20:44:29+00:00","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","archives":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1\/posts"},"0":false}},"content":"","parent":null,"link":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/prevalence\/auto-draft-3\/","date":"2015-11-08T01:56:06","modified":"2015-11-08T01:56:06","format":"standard","slug":"auto-draft-3","guid":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/?post_type=prevalence&#038;p=343","excerpt":null,"menu_order":0,"comment_status":"closed","ping_status":"closed","sticky":false,"date_tz":"UTC","date_gmt":"2015-11-08T01:56:06","modified_tz":"UTC","modified_gmt":"2015-11-08T01:56:06","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/343","author":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","collection":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts","replies":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/343\/comments","version-history":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/343\/revisions"},"year_range":"&gt; 1 to 5 years","affected_people":"205"},"terms":[]},{"ID":340,"title":"Auto Draft","status":"publish","type":"prevalence","author":{"ID":1,"username":"cancer","name":"admin","first_name":"","last_name":"","nickname":"admin","slug":"cancer","URL":"","avatar":"http:\/\/2.gravatar.com\/avatar\/559996423861baf6442d47180dc5e489?s=96","description":"","registered":"2015-11-07T20:44:29+00:00","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","archives":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1\/posts"},"0":false}},"content":"","parent":null,"link":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/prevalence\/auto-draft-2\/","date":"2015-11-08T01:55:29","modified":"2015-11-08T01:55:29","format":"standard","slug":"auto-draft-2","guid":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/?post_type=prevalence&#038;p=340","excerpt":null,"menu_order":0,"comment_status":"closed","ping_status":"closed","sticky":false,"date_tz":"UTC","date_gmt":"2015-11-08T01:55:29","modified_tz":"UTC","modified_gmt":"2015-11-08T01:55:29","meta":{"links":{"self":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/340","author":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/users\/1","collection":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts","replies":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/340\/comments","version-history":"http:\/\/3ada19ec.ngrok.com\/cancer\/team-6\/wp-json\/posts\/340\/revisions"},"year_range":"Up to 1 year","affected_people":"320"},"terms":[]}];
var prevalence=[];

getData();

function getData(){
    for (var i=0;i<data.length;i++){
        prevalence.push([htmlDecode(data[i].meta.year_range),parseInt(data[i].meta.affected_people)]);
    }

}

function htmlDecode(input){
    var e = document.createElement('div');
    e.innerHTML = input;
    return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
}

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart);



// Callback that creates and populates a data table,
// instantiates the pie chart, passes in the data and
// draws it.
function drawChart() {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows(prevalence);

    // Set chart options
    var options = {'title':'Time survived since diagnosis',
        'width':400,
        'height':300,
        chartArea:{left: "30%",right:"0",width:"100%",height:"50%"}
    };

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}

var prevalence;